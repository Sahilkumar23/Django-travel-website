{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - WanderChronicles</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Poppins', sans-serif;
            padding: 20px;
        }
        .checkout-container {
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 12px 35px rgba(34, 60, 80, 0.25);
            width: 500px;
            max-width: 90vw;
            padding: 40px 35px 35px 35px;
            position: relative;
            animation: fadeInUp 0.9s cubic-bezier(.39,.575,.565,1) both;
        }
        @keyframes fadeInUp{
            0%{transform:translateY(40px);opacity:0}
            100%{transform:translateY(0);opacity:1}
        }
        .checkout-header {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 14px 14px 0 0;
            padding: 28px 0 20px 0;
            text-align: center;
            margin: -40px -35px 25px -35px;
            box-shadow: 0 2px 10px #0002;
        }
        .checkout-header h2 {
            margin: 0;
            font-size: 2rem;
            letter-spacing: 1px;
        }
        .booking-details {
            margin-bottom: 30px;
        }
        .booking-list {
            list-style: none;
            padding: 0;
            margin: 0 0 12px 0;
        }
        .booking-list li {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #E0E8EF;
            font-size: 1.05rem;
        }
        .booking-list li:last-child {
            border-bottom: none;
        }
        .booking-amount {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, #f7971e 0%, #ffd200 100%);
            color: #222;
            border-radius: 8px;
            font-size: 1.15rem;
            font-weight: 600;
            padding: 14px 20px;
            margin-top: 14px;
            box-shadow: 0 2px 7px #ffd40047;
        }
        .select-group {
            margin-top: 30px;
        }
        .select-label {
            font-weight: 600;
            color: #234;
            display: block;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        .select-control {
            width: 100%;
            padding: 13px 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color .23s;
            background: #fafbfc;
            margin-bottom: 10px;
        }
        .select-control:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 2.5px #667eea80;
        }
        .confirm-btn {
            display: block;
            width: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            font-size: 1.2rem;
            font-weight: 700;
            padding: 16px;
            border-radius: 40px;
            margin-top: 18px;
            cursor: pointer;
            box-shadow: 0 6px 24px rgba(102, 126, 234, 0.3);
            letter-spacing: 1px;
            transition: .2s;
            text-decoration: none;
            text-align: center;
        }
        .confirm-btn:hover, .confirm-btn:focus {
            background: linear-gradient(90deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0 8px 30px #667eea22;
            transform: translateY(-2px) scale(1.02);
        }
        .booking-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .booking-info p {
            margin: 5px 0;
            color: #555;
        }
        .booking-info strong {
            color: #333;
        }
        .message {
            margin-bottom: 15px;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        .message.success { background: #e6fffa; color: #0b6b50; }
        .message.error { background: #ffe6ea; color: #a10b3f; }
        .message.info { background: #e6f0ff; color: #0b2d6b; }
    </style>
</head>
<body>
    <div class="checkout-container">
        <div class="checkout-header">
            <h2><i class="fas fa-plane"></i> Confirm Your Booking</h2>
            <p style="font-size:1.05rem;letter-spacing:0.5px;margin-top:7px;">Review your trip details and complete payment</p>
        </div>

        {% if messages %}
            {% for message in messages %}
                <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        
        <div class="booking-info">
            <p><strong>Name:</strong> {{ booking.full_name }}</p>
            <p><strong>Email:</strong> {{ booking.email }}</p>
            <p><strong>Phone:</strong> {{ booking.phone }}</p>
            <p><strong>Destination:</strong> {{ booking.destination|title }}</p>
            {% if booking.from_location %}
                <p><strong>From:</strong> {{ booking.from_location }}</p>
            {% endif %}
            {% if booking.to_location %}
                <p><strong>To:</strong> {{ booking.to_location }}</p>
            {% endif %}
            <p><strong>Travel Dates:</strong> 
                {% if booking.depart_date %}
                    {{ booking.depart_date }}{% if booking.return_date %} to {{ booking.return_date }}{% endif %}
                {% else %}
                    Flexible
                {% endif %}
            </p>
            <p><strong>Travelers:</strong> {{ booking.adults }} Adult(s){% if booking.children %}, {{ booking.children }} Child(ren){% endif %}</p>
            <p><strong>Accommodation:</strong> {{ booking.accommodation|title }}</p>
            <p><strong>Trip Type:</strong> {{ booking.trip_type|default:"Leisure" }}</p>
        </div>

        <div class="booking-details">
            <ul class="booking-list">
                <li><span>Trip Package</span><span>₹{{ pricing.package|intcomma }}</span></li>
                <li><span>Service Fee</span><span>₹{{ pricing.service_fee|intcomma }}</span></li>
                <li><span>Taxes & Charges</span><span>₹{{ pricing.taxes|intcomma }}</span></li>
            </ul>
            <div class="booking-amount">
                <span>Total Amount</span>
                <span>₹{{ pricing.total|intcomma }}</span>
            </div>
        </div>
        <form method="post">
            {% csrf_token %}
            <div class="select-group">
                <label class="select-label" for="paymentMethod">Select Payment Method</label>
                <select class="select-control" id="paymentMethod" name="payment_method" required>
                    <option value="" {% if not booking.payment_method %}selected{% endif %}>Choose a payment option</option>
                    <option value="upi" {% if booking.payment_method == "upi" %}selected{% endif %}>UPI</option>
                    <option value="ecash" {% if booking.payment_method == "ecash" %}selected{% endif %}>E-Cash Wallet</option>
                    <option value="card" {% if booking.payment_method == "card" %}selected{% endif %}>Credit/Debit Card</option>
                    <option value="netbanking" {% if booking.payment_method == "netbanking" %}selected{% endif %}>Net Banking</option>
                </select>
            </div>
            <button type="submit" class="confirm-btn">Confirm Booking</button>
        </form>
    </div>
</body>
</html>

